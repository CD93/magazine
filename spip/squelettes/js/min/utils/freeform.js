!function(o){"use strict";var e=window.FreeForm||{};e=function(){function e(n,r){if(!(this instanceof e))return new e;var t=this,s=o(n);t.$form=s,t.$formTexts=s.find(".form-text"),t.$formCheckboxes=s.find(".form-checkbox"),t.options={onSuccess:function(){},afterSucces:function(){},onError:function(){},afterError:function(){}},o.extend(!0,t.options,r),t.$formTexts.on("input paste keyup",function(){o(this).closest(".form-el").removeClass("has-error")}),t.$formCheckboxes.on("change",function(){o(this).closest(".form-el").removeClass("has-error")}),s.on("submit",function(e){e.preventDefault(),o.ajax({data:s.serialize(),url:s.attr("action"),type:"POST",dataType:"JSON"}).done(function(o){s.find(".has-error").removeClass("has-error"),o.success?t.onSuccess():t.onError(o)}).fail(function(o){})})}return e}(),e.prototype.onSuccess=function(){var o=this;"function"==typeof o.options.onSuccess&&o.options.onSuccess(),o.$form.find(".form-text, form-textarea").val("");var e=new Popin(null,{type:"text",content:"Votre message a bien été envoyé !",onReady:function(){setTimeout(function(){e.close(),"function"==typeof o.options.afterSucces&&o.options.afterSucces()},2e3)}});e.open()},e.prototype.onError=function(e){var n=this;"function"==typeof n.options.onError&&n.options.onError(),o.each(e.errors,function(o,e){var r=n.$form.find('[name="'+o+'"]').closest(".form-el"),t=r.find(".form-error");"Required field missing input"===e&&(e="Champs requis"),"Not a valid email"===e&&(e="Email non valide"),"Not a number"===e&&(e="Numéro non valide"),r.removeClass("has-success").addClass("has-error"),t.html(e)});var r=n.$form.closest(".js-side-container");r=r.length?r:window;var t=n.$form.find(".has-error").eq(0),s=t.offset().top-100;s=r.length?s-n.$form.closest(".js-side-content").offset().top:s,TweenLite.to(r,.75,{scrollTo:{y:s},onComplete:function(){"function"==typeof n.options.afterError&&n.options.afterError()}})},o.fn.freeForm=function(o){var n,r=this;for(n=0;n<r.length;n++)r[n].freeForm=new e(r[n],o);return this}}(jQuery);