Lazy=function(t){"use strict";function e(){d=window.innerWidth||document.documentElement.clientWidth,c=window.innerHeight||document.documentElement.clientHeight}function i(t,e){var i=0;return function(){var s=+new Date;e>s-i||(i=s,t())}}if(!(this instanceof Lazy))return new Lazy(t);var s=this;s.options={src:"data-src",selector:".js-lazy",separator:" | ",breakpoints:[{width:1440,src:"data-src-larger"},{width:1280,src:"data-src-large"},{width:992,src:"data-src-medium"},{width:768,src:"data-src-small"},{width:480,src:"data-src-smaller"}],offset:100,onError:function(){},errorClass:"has-error",onSuccess:function(){},successClass:"is-loaded"},$.extend(!0,s.options,t);var r=s.options,a=[],n=r.src,o=Vars.isRetina,d=window.innerWidth,c=window.innerHeight;return s.validate=function(){return s.$images.each(function(t,e){var i=$(this);(s.isInViewport(this)||i.hasClass(r.successClass))&&s.load(this)}),0===a.length?(s.destroy(),!1):void 0},s.load=function(t){var e=$(t),i=e.attr(n)||e.attr(r.src);if(i){var s=i.split(r.separator),d=s[o&&s.length>1?1:0],c=new Image;$.each(r.breakpoints,function(t,i){e.removeAttr(i.src)}),e.removeAttr(r.src),c.onerror=function(){r.onError&&r.onError(t,"invalid"),e.addClass(r.errorClass)},c.onload=function(){if("img"===t.nodeName.toLowerCase())t.src=d;else if("image"===t.nodeName.toLowerCase()){var i=document.createElementNS("http://www.w3.org/2000/svg","image");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d),i.setAttribute("x",t.getAttribute("x")),i.setAttribute("y",t.getAttribute("y")),i.setAttribute("width",t.width.baseVal.value),i.setAttribute("height",t.height.baseVal.value),t.parentNode.appendChild(i),t.remove()}else e.css("background-image",'url("'+d+'")');e.addClass(r.successClass),r.onSuccess&&r.onSuccess(t)},c.src=d,a.splice($.inArray(t,a),1)}},s.isInViewport=function(e){var i=e.getBoundingClientRect(),s=c+r.offset;return i.top>=0&&i.top<=s||i.bottom<=s&&i.bottom>=0-t.offset},s.init=function(){s.destroyed=!0,s.$images=$(r.selector),s.$images.each(function(t,e){a.push(this)}),e(),s.validateT=i(s.validate,250),s.updateSizesT=i(e,500),s.updateAndValidateT=function(){s.updateSizesT(),s.validateT()},$.each(r.breakpoints,function(t,e){return e.width<=d?(n=e.src,!1):void 0}),s.destroyed&&(s.destroyed=!1,$window.on({resize:s.updateAndValidateT,scroll:s.validateT})),s.validate()},s.init(),s},Lazy.prototype={revalidate:function(){var t=this;t.destroyed||t.validate()},reInit:function(){var t=this;t.$images=$(t.options.selector).not("."+t.options.successClass),t.$images&&(t.destroyed=!1,t.revalidate())},destroy:function(){var t=this;t.destroyed=!0,$window.off({resize:t.updateAndValidateT,scroll:t.validateT}),t.$images=null}};